<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Love Jar 💕</title>
  <!-- Lovey-dovey Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Great+Vibes&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css"/>
  <!-- Mammoth.js for DOCX parsing -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.2/mammoth.browser.min.js"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <!-- Background Music (hidden audio element) -->
  <audio id="background-music" src="music.mp3" preload="auto"></audio>

  <!-- Login Screen -->
  <div id="login-screen">
    <h2>💕 Welcome to the Love Jar. Speak your dreams, and I'll be the genie to grant them—our love, our sweet little secret. 💕</h2>
    <input type="text" id="username" placeholder="Enter your name"/>
    <button onclick="login()">Login</button>
  </div>

  <!-- Main App -->
  <div id="main-app" class="hidden">
    <h1 class="lovey">🎀 Love Jar 🎀</h1>

    <!-- Header doodles -->
    <div id="header-doodles">
      <span class="ribbon">🎀</span>
      <span class="cat">🐱</span>
      <span class="ribbon">🎀</span>
    </div>

    <!-- File Upload Section -->
    <div id="upload-section">
      <p>Place your heartfelt wishes here, so I can fulfill them for you🎀.</p>
      <input type="file" id="fileInput" accept=".txt,.docx" onchange="uploadFile(event)"/>
      <br/>
      <!-- <button onclick="loadDummyWishes()">Load Dummy Wishes</button> -->
    </div>

    <!-- Display number of wishes loaded -->
    <p id="task-count">0 wishes loaded</p>

    <!-- Button to pick a wish -->
    <button onclick="pickTask()">Pick a Wish</button>

    <!-- Jar Container -->
    <div id="jar-container">
      <div class="jar">
        <!-- Clickable lid -->
        <div class="jar-lid" onclick="toggleLid()"></div>
        <!-- Jar body with smooth clip-path shape -->
        <div class="jar-body">
          <div id="chits"></div>
        </div>
      </div>
    </div>

    <!-- Suspense Timer (hidden by default) -->
    <div id="suspense-timer" class="hidden">
      <p id="timer-text">5</p>
    </div>

    <!-- Hand Animation Container -->
    <div id="hand-container" class="hidden">
      <div class="hand"></div>
    </div>

    <!-- Final Popup Modal (for the chosen wish) -->
    <div id="popup" class="hidden" style="display: none;">
      <div class="popup-content">
        <span class="close" onclick="closePopup()">&times;</span>
        <p id="popup-text"></p>
      </div>
    </div>

    <!-- Celebration Container -->
    <div id="celebration" class="hidden"></div>

    <!-- Secret Message Section -->
    <div id="secret-message">
      <h3 class="lovey">💌 Secret Message 💌</h3>
      <textarea id="messageInput" placeholder="Write a love note..."></textarea>
      <button onclick="saveMessage()">Save</button>
      <p id="saved-message"></p>
    </div>

    <!-- Footer doodles -->
    <div id="footer-doodles">
      <span class="cat">🐱</span>
      <span class="ribbon">🎀</span>
      <span class="cat">🐱</span>
    </div>
  </div>
</body>
</html>
